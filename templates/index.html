{% extends "base.html" %}
{% block title %}MQTT Messages{% endblock %}

{% block notification %}
<div id="notification" style="display: none; position: fixed; top: 100px; right: 20px; background-color: #f5f5f5; color: #333; padding: 10px; border-radius: 5px; z-index: 1000;">
    Connected to MQTT Broker!
</div>
{% endblock %}

{% block content %}
    <h1 class="outlined-text">MultiTech Network Dashboard</h1>
    <h3 class="welcome-text">Welcome to the MultiTech Network Dashboard. This application allows you to:</h3>
    <ul class="welcome-text">
        <li>Connect to your MTCAP3 MultiTech Gateway.</li>
        <li>View real-time and historical data from your Radiobridge sensors.</li>
        <li>Configure your Radiobridge sensors.</li>
        <li>Upload and view MQTT messages.</li>
    </ul>
    {% include 'connect_form.html' %}
    <div class="dump">
        <button type="button" id="dumpMessages" onclick="dumpMessagesToJSON()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-download icon-margin" viewBox="0 0 16 16">
                <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
                <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
              </svg>Dump Messages to JSON
        </button>
    </div>
    {% include 'mqtt_table.html' %}
{% endblock %}

{% block javascript %}
<script src="../static/js/notification.js"></script>
<script src="../static/js/mqtt_messages.js"></script>
{% endblock %}
